[{"path":"https://corymccartan.github.io/conformalbayes/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2022 Cory McCartan Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://corymccartan.github.io/conformalbayes/articles/conformalbayes.html","id":"citations","dir":"Articles","previous_headings":"","what":"Citations","title":"Introduction to conformalbayes","text":"Barber, R. F., Candes, E. J., Ramdas, ., & Tibshirani, R. J. (2021). Predictive inference jackknife+. Annals Statistics, 49(1), 486-507. Lei, J., G’Sell, M., Rinaldo, ., Tibshirani, R. J., & Wasserman, L. (2018). Distribution-free predictive inference regression. Journal American Statistical Association, 113(523), 1094-1111.","code":""},{"path":"https://corymccartan.github.io/conformalbayes/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Cory McCartan. Author, maintainer.","code":""},{"path":"https://corymccartan.github.io/conformalbayes/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"McCartan C (2022). conformalbayes: Jackknife(+) Predictive Intervals Bayesian Models. https://github.com/CoryMcCartan/conformalbayes, https://corymccartan.github.io/conformalbayes/.","code":"@Manual{,   title = {conformalbayes: Jackknife(+) Predictive Intervals for Bayesian Models},   author = {Cory McCartan},   year = {2022},   note = {https://github.com/CoryMcCartan/conformalbayes, https://corymccartan.github.io/conformalbayes/}, }"},{"path":"https://corymccartan.github.io/conformalbayes/index.html","id":"conformalbayes-","dir":"","previous_headings":"","what":"Jackknife(+) Predictive Intervals for Bayesian Models","title":"Jackknife(+) Predictive Intervals for Bayesian Models","text":"conformalbayes provides functions construct finite-sample calibrated predictive intervals Bayesian models, following approach Barber et al. (2021). intervals calculated efficiently using importance sampling leave-one-residuals. default, intervals also reflect relative uncertainty Bayesian model, using locally-weighted conformal methods Lei et al. (2018).","code":""},{"path":"https://corymccartan.github.io/conformalbayes/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Jackknife(+) Predictive Intervals for Bayesian Models","text":"can install development version conformalbayes :","code":"# install.packages(\"devtools\") devtools::install_github(\"CoryMcCartan/conformalbayes\")"},{"path":"https://corymccartan.github.io/conformalbayes/index.html","id":"example","dir":"","previous_headings":"","what":"Example","title":"Jackknife(+) Predictive Intervals for Bayesian Models","text":"Read Getting Started page.","code":"library(rstanarm) library(conformalbayes) data(\"Loblolly\")  fit_idx = sample(nrow(Loblolly), 50) d_fit = Loblolly[fit_idx, ] d_test = Loblolly[-fit_idx, ]  # fit a simple linear regression m = stan_glm(height ~ sqrt(age), data=d_fit,     chains=1, control=list(adapt_delta=0.999), refresh=0)  # prepare conformal predictions m = loo_conformal(m)  # make predictive intervals pred_ci = predictive_interval(m, newdata=d_test, prob=0.9) print(head(pred_ci)) #>             5%       95% #> 1  -0.15888597  5.600095 #> 29 25.43314599 30.988491 #> 57 48.67648127 54.182655 #> 2  -0.09561987  5.447242 #> 30 25.42970114 30.938488 #> 72 58.01173186 63.596592  # are we covering? mean(pred_ci[, \"5%\"] <= d_test$height &          d_test$height <= pred_ci[, \"95%\"]) #> [1] 0.9117647"},{"path":"https://corymccartan.github.io/conformalbayes/index.html","id":"citations","dir":"","previous_headings":"","what":"Citations","title":"Jackknife(+) Predictive Intervals for Bayesian Models","text":"Barber, R. F., Candes, E. J., Ramdas, ., & Tibshirani, R. J. (2021). Predictive inference jackknife+. Annals Statistics, 49(1), 486-507. Lei, J., G’Sell, M., Rinaldo, ., Tibshirani, R. J., & Wasserman, L. (2018). Distribution-free predictive inference regression. Journal American Statistical Association, 113(523), 1094-1111.","code":""},{"path":"https://corymccartan.github.io/conformalbayes/reference/conformalbayes-package.html","id":null,"dir":"Reference","previous_headings":"","what":"conformalbayes: Jackknife(+) Predictive Intervals for Bayesian Models — conformalbayes-package","title":"conformalbayes: Jackknife(+) Predictive Intervals for Bayesian Models — conformalbayes-package","text":"Provides functions construct finite-sample calibrated predictive intervals Bayesian models, following approach Barber et al. (2021) doi:10.1214/20-AOS1965 . intervals calculated efficiently using importance sampling leave-one-residuals. default, intervals also reflect relative uncertainty Bayesian model, using locally-weighted conformal methods Lei et al. (2018) doi:10.1080/01621459.2017.1307116 .","code":""},{"path":[]},{"path":"https://corymccartan.github.io/conformalbayes/reference/conformalbayes-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"conformalbayes: Jackknife(+) Predictive Intervals for Bayesian Models — conformalbayes-package","text":"Maintainer: Cory McCartan cmccartan@g.harvard.edu (ORCID)","code":""},{"path":"https://corymccartan.github.io/conformalbayes/reference/loo_conformal.html","id":null,"dir":"Reference","previous_headings":"","what":"Enable leave-one-out conformal predictive intervals for a fit model — loo_conformal","title":"Enable leave-one-out conformal predictive intervals for a fit model — loo_conformal","text":"Prepares jackknife(+) conformal prediction performing Pareto-smoothed importance sampling yield leave-one-residuals.","code":""},{"path":"https://corymccartan.github.io/conformalbayes/reference/loo_conformal.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Enable leave-one-out conformal predictive intervals for a fit model — loo_conformal","text":"","code":"loo_conformal(fit, ...)  # S3 method for default loo_conformal(fit, truth, chain = NULL, est_fun = c(\"mean\", \"median\"), ...)  # S3 method for stanreg loo_conformal(fit, est_fun = c(\"mean\", \"median\"), ...)  # S3 method for brmsfit loo_conformal(fit, est_fun = c(\"mean\", \"median\"), ...)"},{"path":"https://corymccartan.github.io/conformalbayes/reference/loo_conformal.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Enable leave-one-out conformal predictive intervals for a fit model — loo_conformal","text":"fit Model fit; object posterior_predict() log_lik() methods. Can also array posterior predictions. ... Ignored. truth True values predict. required rstanarm brms models. chain integer vector identifying chain numbers posterior draws. provided multiple chains used. est_fun Whether use posterior mean (default) median point estimate.","code":""},{"path":"https://corymccartan.github.io/conformalbayes/reference/loo_conformal.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Enable leave-one-out conformal predictive intervals for a fit model — loo_conformal","text":"modified fit object additional class conformal. Calling predictive_interval() new object yield conformal intervals.","code":""},{"path":"https://corymccartan.github.io/conformalbayes/reference/loo_conformal.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Enable leave-one-out conformal predictive intervals for a fit model — loo_conformal","text":"Vehtari, ., Simpson, D., Gelman, ., Yao, Y., & Gabry, J. (2015). Pareto smoothed importance sampling. arXiv preprint arXiv:1507.02646.","code":""},{"path":"https://corymccartan.github.io/conformalbayes/reference/loo_conformal.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Enable leave-one-out conformal predictive intervals for a fit model — loo_conformal","text":"","code":"if (requireNamespace(\"rstanarm\", quietly=TRUE)) suppressWarnings({     library(rstanarm)     # fit a simple linear regression     m = stan_glm(mpg ~ disp + cyl, data=mtcars,         chains=1, iter=1000,         control=list(adapt_delta=0.999), refresh=0)      loo_conformal(m) }) #> Loading required package: Rcpp #> This is rstanarm version 2.21.3 #> - See https://mc-stan.org/rstanarm/articles/priors for changes to default priors! #> - Default priors may change, so it's safest to specify priors, even if equivalent to the defaults. #> - For execution on a local, multicore CPU with excess RAM we recommend calling #>   options(mc.cores = parallel::detectCores()) #> stan_glm #>  family:       gaussian [identity] #>  formula:      mpg ~ disp + cyl #>  observations: 32 #>  predictors:   3 #> ------ #>             Median MAD_SD #> (Intercept) 34.6    2.6   #> disp         0.0    0.0   #> cyl         -1.6    0.8   #>  #> Auxiliary parameter(s): #>       Median MAD_SD #> sigma 3.1    0.4    #>  #> ------ #> * For help interpreting the printed output see ?print.stanreg #> * For info on the priors used see ?prior_summary.stanreg #> (conformalbayes enabled, with estimated CI inflation factor 0.95)"},{"path":"https://corymccartan.github.io/conformalbayes/reference/predictive_interval.conformal.html","id":null,"dir":"Reference","previous_headings":"","what":"Jackknife(+) predictive intervals — predictive_interval.conformal","title":"Jackknife(+) predictive intervals — predictive_interval.conformal","text":"Construct finite-sample calibrated predictive intervals Bayesian models, following approach Barber et al. (2021). default, intervals also reflect relative uncertainty Bayesian model, using locally-weighted conformal methods Lei et al. (2018).","code":""},{"path":"https://corymccartan.github.io/conformalbayes/reference/predictive_interval.conformal.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Jackknife(+) predictive intervals — predictive_interval.conformal","text":"","code":"# S3 method for conformal predictive_interval(object, probs = 0.9, plus = NULL, local = TRUE, ...)"},{"path":"https://corymccartan.github.io/conformalbayes/reference/predictive_interval.conformal.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Jackknife(+) predictive intervals — predictive_interval.conformal","text":"object fitted model passed loo_conformal() probs coverage probabilities calculate intervals . Empirically, coverage rate constructed intervals generally match probabilities, theoretical guarantee probability \\(1-\\alpha\\) coverage least \\(1-2\\alpha\\), plus=TRUE (). plus TRUE, construct jackknife+ intervals, theoretical guarantee. require higher computational costs, scale number training prediction points. Defaults TRUE numbers less 500. local TRUE (default), perform locally-weighted conformal inference. inflate width predictive intervals constant amount across predictions, preserving relative amount uncertainty captured model. FALSE, predictive intervals (nearly) width. ... arguments posterior_predict() method object.","code":""},{"path":"https://corymccartan.github.io/conformalbayes/reference/predictive_interval.conformal.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Jackknife(+) predictive intervals — predictive_interval.conformal","text":"matrix number rows matching number predictions. Columns labeled percentile corresponding probs; e.g. probs=0.9 columns 5% 95%.","code":""},{"path":"https://corymccartan.github.io/conformalbayes/reference/predictive_interval.conformal.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Jackknife(+) predictive intervals — predictive_interval.conformal","text":"Barber, R. F., Candes, E. J., Ramdas, ., & Tibshirani, R. J. (2021). Predictive inference jackknife+. Annals Statistics, 49(1), 486-507. Lei, J., G’Sell, M., Rinaldo, ., Tibshirani, R. J., & Wasserman, L. (2018). Distribution-free predictive inference regression. Journal American Statistical Association, 113(523), 1094-1111.","code":""},{"path":"https://corymccartan.github.io/conformalbayes/reference/predictive_interval.conformal.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Jackknife(+) predictive intervals — predictive_interval.conformal","text":"","code":"if (requireNamespace(\"rstanarm\", quietly=TRUE)) suppressWarnings({     library(rstanarm)     # fit a simple linear regression     m = stan_glm(mpg ~ disp + cyl, data=mtcars,         chains=1, iter=1000,         control=list(adapt_delta=0.999), refresh=0)      m = loo_conformal(m)     # make predictive intervals     predictive_interval(m) }) #>                            5%      95% #> Mazda RX4           17.104767 26.75703 #> Mazda RX4 Wag       17.235544 26.81853 #> Datsun 710          20.949622 31.35086 #> Hornet 4 Drive      15.002274 24.60874 #> Hornet Sportabout    9.765630 20.00111 #> Valiant             16.171087 25.77426 #> Duster 360           9.489612 19.63211 #> Merc 240D           19.988246 31.14785 #> Merc 230            19.975869 31.18397 #> Merc 280            16.818407 27.26744 #> Merc 280C           17.159906 27.03450 #> Merc 450SE          11.087664 20.92194 #> Merc 450SL          10.819348 21.13318 #> Merc 450SLC         10.608404 21.41190 #> Cadillac Fleetwood   6.981648 18.01219 #> Lincoln Continental  6.929344 17.80378 #> Chrysler Imperial    8.148012 17.90319 #> Fiat 128            21.439960 32.44789 #> Honda Civic         21.587552 31.97432 #> Toyota Corolla      21.872622 32.24943 #> Toyota Corona       20.860949 31.02422 #> Dodge Challenger    10.094491 20.32108 #> AMC Javelin         10.575165 20.55828 #> Camaro Z28           9.740118 19.59138 #> Pontiac Firebird     8.990470 18.86693 #> Fiat X1-9           21.831529 32.51295 #> Porsche 914-2       20.968922 31.44525 #> Lotus Europa        21.450627 31.39320 #> Ford Pantera L       9.593646 19.59342 #> Ferrari Dino        17.535077 27.47942 #> Maserati Bora       11.096523 20.31218 #> Volvo 142E          20.834472 31.23585"},{"path":"https://corymccartan.github.io/conformalbayes/news/index.html","id":"conformalbayes-010","dir":"Changelog","previous_headings":"","what":"conformalbayes 0.1.0","title":"conformalbayes 0.1.0","text":"CRAN release: 2022-03-10 Basic jackknife+ predictions optional local weighting Tests vignettes","code":""}]
