<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Construct finite-sample calibrated predictive intervals for Bayesian models,
following the approach in Barber et al. (2021). By default, the intervals will also reflect the
relative uncertainty in the Bayesian model, using the locally-weighted
conformal methods of Lei et al. (2018)."><title>Jackknife(+) predictive intervals — predictive_interval.conformal • conformalbayes</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Jackknife(+) predictive intervals — predictive_interval.conformal"><meta property="og:description" content="Construct finite-sample calibrated predictive intervals for Bayesian models,
following the approach in Barber et al. (2021). By default, the intervals will also reflect the
relative uncertainty in the Bayesian model, using the locally-weighted
conformal methods of Lei et al. (2018)."><meta property="og:image" content="https://corymccartan.github.io/conformalbayes/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">conformalbayes</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/conformalbayes.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/CoryMcCartan/conformalbayes/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Jackknife(+) predictive intervals</h1>
      <small class="dont-index">Source: <a href="https://github.com/CoryMcCartan/conformalbayes/blob/HEAD/R/predictive_interval.R" class="external-link"><code>R/predictive_interval.R</code></a></small>
      <div class="d-none name"><code>predictive_interval.conformal.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Construct finite-sample calibrated predictive intervals for Bayesian models,
following the approach in Barber et al. (2021). By default, the intervals will also reflect the
relative uncertainty in the Bayesian model, using the locally-weighted
conformal methods of Lei et al. (2018).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="co"># S3 method for conformal</span>
<span class="fu"><a href="https://mc-stan.org/rstanarm/reference/predictive_interval.stanreg.html" class="external-link">predictive_interval</a></span><span class="op">(</span><span class="va">object</span>, probs <span class="op">=</span> <span class="fl">0.9</span>, plus <span class="op">=</span> <span class="cn">NULL</span>, local <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>object</dt>
<dd><p>A fitted model which has been passed through <code><a href="loo_conformal.html">loo_conformal()</a></code></p></dd>
<dt>probs</dt>
<dd><p>The coverage probabilities to calculate intervals for.
Empirically, the coverage rate of the constructed intervals will generally
match these probabilities, but the theoretical guarantee for a probability
of \(1-\alpha\) is only for coverage of at least \(1-2\alpha\), and
only if <code>plus=TRUE</code> (below).</p></dd>
<dt>plus</dt>
<dd><p>If <code>TRUE</code>, construct jackknife+ intervals, which have a
theoretical guarantee. These require higher computational costs, which
scale with both the number of training and prediction points. Defaults to
<code>TRUE</code> when both of these numbers are less than 500.</p></dd>
<dt>local</dt>
<dd><p>If <code>TRUE</code> (the default), perform locally-weighted conformal
inference. This will inflate the width of the predictive intervals by a
constant amount across all predictions, preserving the relative amount of
uncertainty captured by the model. If <code>FALSE</code>, all predictive intervals
will have (nearly) the same width.</p></dd>
<dt>...</dt>
<dd><p>Further arguments to the <code><a href="https://mc-stan.org/rstanarm/reference/posterior_predict.stanreg.html" class="external-link">posterior_predict()</a></code> method for <code>object</code>.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A matrix with the number of rows matching the number of predictions.
Columns will be labeled with a percentile corresponding to <code>probs</code>; e.g. if
<code>probs=0.9</code> the columns will be <code>5%</code> and <code>95%</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Barber, R. F., Candes, E. J., Ramdas, A., &amp; Tibshirani, R. J. (2021).
Predictive inference with the jackknife+. <em>The Annals of Statistics, 49</em>(1),
486-507.</p>
<p>Lei, J., G’Sell, M., Rinaldo, A., Tibshirani, R. J., &amp; Wasserman, L. (2018).
Distribution-free predictive inference for regression. <em>Journal of the
American Statistical Association, 113</em>(523), 1094-1111.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"rstanarm"</span>, quietly<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="op">{</span></span>
<span class="r-in">    <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mc-stan.org/rstanarm/" class="external-link">rstanarm</a></span><span class="op">)</span></span>
<span class="r-in">    <span class="co"># fit a simple linear regression</span></span>
<span class="r-in">    <span class="va">m</span> <span class="op">=</span> <span class="fu"><a href="https://mc-stan.org/rstanarm/reference/stan_glm.html" class="external-link">stan_glm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">disp</span> <span class="op">+</span> <span class="va">cyl</span>, data<span class="op">=</span><span class="va">mtcars</span>,</span>
<span class="r-in">        chains<span class="op">=</span><span class="fl">1</span>, iter<span class="op">=</span><span class="fl">1000</span>,</span>
<span class="r-in">        control<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>adapt_delta<span class="op">=</span><span class="fl">0.999</span><span class="op">)</span>, refresh<span class="op">=</span><span class="fl">0</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in">    <span class="va">m</span> <span class="op">=</span> <span class="fu"><a href="loo_conformal.html">loo_conformal</a></span><span class="op">(</span><span class="va">m</span><span class="op">)</span></span>
<span class="r-in">    <span class="co"># make predictive intervals</span></span>
<span class="r-in">    <span class="fu"><a href="https://mc-stan.org/rstanarm/reference/predictive_interval.stanreg.html" class="external-link">predictive_interval</a></span><span class="op">(</span><span class="va">m</span><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                            5%      95%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4           17.272163 26.56781</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4 Wag       17.338256 26.60573</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Datsun 710          21.120373 31.16898</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet 4 Drive      15.282762 23.91217</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet Sportabout    9.692534 19.07198</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Valiant             15.647767 25.36354</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Duster 360           9.533651 19.32828</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 240D           19.976806 30.17477</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 230            20.575764 30.46546</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 280            17.254187 26.47874</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 280C           17.298873 26.36326</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SE          11.285085 20.94897</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SL          11.317589 20.84539</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SLC         11.781277 21.26017</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Cadillac Fleetwood   6.645900 17.07670</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lincoln Continental  7.099779 17.41012</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chrysler Imperial    7.267956 17.59311</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fiat 128            21.332172 32.07739</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Honda Civic         21.853715 31.42795</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Toyota Corolla      21.957338 32.01999</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Toyota Corona       20.910256 30.73708</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Dodge Challenger    10.157514 20.32843</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AMC Javelin         10.924511 20.17292</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Camaro Z28           9.737651 19.37506</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Pontiac Firebird     8.708599 18.61387</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fiat X1-9           21.940949 31.78036</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Porsche 914-2       20.924055 30.82306</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lotus Europa        21.141494 31.12190</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Ford Pantera L       9.611753 19.69293</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Ferrari Dino        17.543158 26.80903</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Maserati Bora       10.814080 20.51868</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Volvo 142E          20.998102 30.89299</span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="https://corymccartan.github.io/" class="external-link">Cory McCartan</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer></div>

  

  

  </body></html>

