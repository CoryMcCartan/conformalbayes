<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Construct finite-sample calibrated predictive intervals for Bayesian models,
following the approach in Barber et al. (2021). By default, the intervals will also reflect the
relative uncertainty in the Bayesian model, using the locally-weighted
conformal methods of Lei et al. (2018)."><title>Jackknife(+) predictive intervals — predictive_interval.conformal • conformalbayes</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Jackknife(+) predictive intervals — predictive_interval.conformal"><meta property="og:description" content="Construct finite-sample calibrated predictive intervals for Bayesian models,
following the approach in Barber et al. (2021). By default, the intervals will also reflect the
relative uncertainty in the Bayesian model, using the locally-weighted
conformal methods of Lei et al. (2018)."><meta property="og:image" content="https://corymccartan.github.io/conformalbayes/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">conformalbayes</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/conformalbayes.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/CoryMcCartan/conformalbayes/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Jackknife(+) predictive intervals</h1>
      <small class="dont-index">Source: <a href="https://github.com/CoryMcCartan/conformalbayes/blob/HEAD/R/predictive_interval.R" class="external-link"><code>R/predictive_interval.R</code></a></small>
      <div class="d-none name"><code>predictive_interval.conformal.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Construct finite-sample calibrated predictive intervals for Bayesian models,
following the approach in Barber et al. (2021). By default, the intervals will also reflect the
relative uncertainty in the Bayesian model, using the locally-weighted
conformal methods of Lei et al. (2018).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S3 method for conformal</span></span>
<span><span class="fu"><a href="https://mc-stan.org/rstantools/reference/predictive_interval.html" class="external-link">predictive_interval</a></span><span class="op">(</span><span class="va">object</span>, probs <span class="op">=</span> <span class="fl">0.9</span>, plus <span class="op">=</span> <span class="cn">NULL</span>, local <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>object</dt>
<dd><p>A fitted model which has been passed through <code><a href="loo_conformal.html">loo_conformal()</a></code></p></dd>


<dt>probs</dt>
<dd><p>The coverage probabilities to calculate intervals for.
Empirically, the coverage rate of the constructed intervals will generally
match these probabilities, but the theoretical guarantee for a probability
of \(1-\alpha\) is only for coverage of at least \(1-2\alpha\), and
only if <code>plus=TRUE</code> (below).</p></dd>


<dt>plus</dt>
<dd><p>If <code>TRUE</code>, construct jackknife+ intervals, which have a
theoretical guarantee. These require higher computational costs, which
scale with both the number of training and prediction points. Defaults to
<code>TRUE</code> when both of these numbers are less than 500.</p></dd>


<dt>local</dt>
<dd><p>If <code>TRUE</code> (the default), perform locally-weighted conformal
inference. This will inflate the width of the predictive intervals by a
constant amount across all predictions, preserving the relative amount of
uncertainty captured by the model. If <code>FALSE</code>, all predictive intervals
will have (nearly) the same width.</p></dd>


<dt>...</dt>
<dd><p>Further arguments to the <code><a href="https://mc-stan.org/rstantools/reference/posterior_predict.html" class="external-link">posterior_predict()</a></code> method for <code>object</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A matrix with the number of rows matching the number of predictions.
Columns will be labeled with a percentile corresponding to <code>probs</code>; e.g. if
<code>probs=0.9</code> the columns will be <code>5%</code> and <code>95%</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Barber, R. F., Candes, E. J., Ramdas, A., &amp; Tibshirani, R. J. (2021).
Predictive inference with the jackknife+. <em>The Annals of Statistics, 49</em>(1),
486-507.</p>
<p>Lei, J., G’Sell, M., Rinaldo, A., Tibshirani, R. J., &amp; Wasserman, L. (2018).
Distribution-free predictive inference for regression. <em>Journal of the
American Statistical Association, 113</em>(523), 1094-1111.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"rstanarm"</span>, quietly<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mc-stan.org/rstanarm/" class="external-link">rstanarm</a></span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="co"># fit a simple linear regression</span></span></span>
<span class="r-in"><span>    <span class="va">m</span> <span class="op">=</span> <span class="fu"><a href="https://mc-stan.org/rstanarm/reference/stan_glm.html" class="external-link">stan_glm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">disp</span> <span class="op">+</span> <span class="va">cyl</span>, data<span class="op">=</span><span class="va">mtcars</span>,</span></span>
<span class="r-in"><span>        chains<span class="op">=</span><span class="fl">1</span>, iter<span class="op">=</span><span class="fl">1000</span>,</span></span>
<span class="r-in"><span>        control<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>adapt_delta<span class="op">=</span><span class="fl">0.999</span><span class="op">)</span>, refresh<span class="op">=</span><span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>    <span class="va">m</span> <span class="op">=</span> <span class="fu"><a href="loo_conformal.html">loo_conformal</a></span><span class="op">(</span><span class="va">m</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="co"># make predictive intervals</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://mc-stan.org/rstantools/reference/predictive_interval.html" class="external-link">predictive_interval</a></span><span class="op">(</span><span class="va">m</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                            5%      95%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4           17.110736 26.90264</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4 Wag       17.268230 26.73333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Datsun 710          21.941012 31.39870</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet 4 Drive      15.243863 24.92812</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet Sportabout    9.726555 19.60827</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Valiant             15.596218 25.40610</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Duster 360           9.504357 19.22656</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 240D           20.180579 30.86500</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 230            20.807250 30.73146</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 280            17.035988 26.40159</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 280C           16.709179 26.46263</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SE          11.328152 21.52446</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SL          11.335674 21.03168</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SLC         11.263284 21.38011</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Cadillac Fleetwood   6.616124 18.02776</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lincoln Continental  6.867457 18.06346</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chrysler Imperial    7.736221 17.83694</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fiat 128            22.164125 32.14907</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Honda Civic         21.960209 32.07576</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Toyota Corolla      22.135744 31.95427</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Toyota Corona       21.133056 31.30478</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Dodge Challenger    10.040998 20.24118</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AMC Javelin         10.870161 20.61888</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Camaro Z28           9.814642 19.47436</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Pontiac Firebird     8.900908 18.89298</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fiat X1-9           22.341701 32.20451</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Porsche 914-2       21.215152 31.51973</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lotus Europa        21.553038 31.24433</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Ford Pantera L       9.450562 19.28230</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Ferrari Dino        17.126817 27.39371</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Maserati Bora       10.782410 20.76264</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Volvo 142E          20.796653 31.32089</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="https://corymccartan.github.io/" class="external-link">Cory McCartan</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

