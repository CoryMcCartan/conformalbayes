<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Jackknife(+) predictive intervals — predictive_interval.conformal • conformalbayes</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Jackknife(+) predictive intervals — predictive_interval.conformal"><meta name="description" content="Construct finite-sample calibrated predictive intervals for Bayesian models,
following the approach in Barber et al. (2021). By default, the intervals will also reflect the
relative uncertainty in the Bayesian model, using the locally-weighted
conformal methods of Lei et al. (2018)."><meta property="og:description" content="Construct finite-sample calibrated predictive intervals for Bayesian models,
following the approach in Barber et al. (2021). By default, the intervals will also reflect the
relative uncertainty in the Bayesian model, using the locally-weighted
conformal methods of Lei et al. (2018)."><meta property="og:image" content="http://corymccartan.com/conformalbayes/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-dark" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">conformalbayes</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/conformalbayes.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/CoryMcCartan/conformalbayes/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Jackknife(+) predictive intervals</h1>
      <small class="dont-index">Source: <a href="https://github.com/CoryMcCartan/conformalbayes/blob/main/R/predictive_interval.R" class="external-link"><code>R/predictive_interval.R</code></a></small>
      <div class="d-none name"><code>predictive_interval.conformal.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Construct finite-sample calibrated predictive intervals for Bayesian models,
following the approach in Barber et al. (2021). By default, the intervals will also reflect the
relative uncertainty in the Bayesian model, using the locally-weighted
conformal methods of Lei et al. (2018).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S3 method for class 'conformal'</span></span>
<span><span class="fu"><a href="https://mc-stan.org/rstantools/reference/predictive_interval.html" class="external-link">predictive_interval</a></span><span class="op">(</span><span class="va">object</span>, probs <span class="op">=</span> <span class="fl">0.9</span>, plus <span class="op">=</span> <span class="cn">NULL</span>, local <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a></dt>
<dd><p>A fitted model which has been passed through <code><a href="loo_conformal.html">loo_conformal()</a></code></p></dd>


<dt id="arg-probs">probs<a class="anchor" aria-label="anchor" href="#arg-probs"></a></dt>
<dd><p>The coverage probabilities to calculate intervals for.
Empirically, the coverage rate of the constructed intervals will generally
match these probabilities, but the theoretical guarantee for a probability
of \(1-\alpha\) is only for coverage of at least \(1-2\alpha\), and
only if <code>plus=TRUE</code> (below).</p></dd>


<dt id="arg-plus">plus<a class="anchor" aria-label="anchor" href="#arg-plus"></a></dt>
<dd><p>If <code>TRUE</code>, construct jackknife+ intervals, which have a
theoretical guarantee. These require higher computational costs, which
scale with both the number of training and prediction points. Defaults to
<code>TRUE</code> when both of these numbers are less than 500.</p></dd>


<dt id="arg-local">local<a class="anchor" aria-label="anchor" href="#arg-local"></a></dt>
<dd><p>If <code>TRUE</code> (the default), perform locally-weighted conformal
inference. This will inflate the width of the predictive intervals by a
constant amount across all predictions, preserving the relative amount of
uncertainty captured by the model. If <code>FALSE</code>, all predictive intervals
will have (nearly) the same width.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Further arguments to the <a href="https://mc-stan.org/rstantools/reference/posterior_predict.html" class="external-link">posterior_predict()</a>
method for <code>object</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A matrix with the number of rows matching the number of predictions.
Columns will be labeled with a percentile corresponding to <code>probs</code>; e.g. if
<code>probs=0.9</code> the columns will be <code>5%</code> and <code>95%</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Barber, R. F., Candes, E. J., Ramdas, A., &amp; Tibshirani, R. J. (2021).
Predictive inference with the jackknife+. <em>The Annals of Statistics, 49</em>(1),
486-507.</p>
<p>Lei, J., G’Sell, M., Rinaldo, A., Tibshirani, R. J., &amp; Wasserman, L. (2018).
Distribution-free predictive inference for regression. <em>Journal of the
American Statistical Association, 113</em>(523), 1094-1111.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"rstanarm"</span>, quietly<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mc-stan.org/rstanarm/" class="external-link">rstanarm</a></span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="co"># fit a simple linear regression</span></span></span>
<span class="r-in"><span>    <span class="va">m</span> <span class="op">=</span> <span class="fu"><a href="https://mc-stan.org/rstanarm/reference/stan_glm.html" class="external-link">stan_glm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">disp</span> <span class="op">+</span> <span class="va">cyl</span>, data<span class="op">=</span><span class="va">mtcars</span>,</span></span>
<span class="r-in"><span>        chains<span class="op">=</span><span class="fl">1</span>, iter<span class="op">=</span><span class="fl">500</span>,</span></span>
<span class="r-in"><span>        control<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>adapt_delta<span class="op">=</span><span class="fl">0.999</span><span class="op">)</span>, refresh<span class="op">=</span><span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>    <span class="va">m</span> <span class="op">=</span> <span class="fu"><a href="loo_conformal.html">loo_conformal</a></span><span class="op">(</span><span class="va">m</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="co"># make predictive intervals</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://mc-stan.org/rstantools/reference/predictive_interval.html" class="external-link">predictive_interval</a></span><span class="op">(</span><span class="va">m</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                            5%      95%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4           16.381827 28.18769</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4 Wag       16.614507 26.94348</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Datsun 710          20.804507 31.90627</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet 4 Drive      15.086216 24.68408</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet Sportabout    9.529887 20.03695</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Valiant             15.603716 26.06700</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Duster 360           8.791614 19.63106</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 240D           19.871652 30.89690</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 230            20.277989 31.29874</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 280            16.401084 27.43578</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 280C           15.997483 27.16487</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SE          11.039505 21.84140</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SL          11.272833 20.92848</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SLC         10.685265 21.95885</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Cadillac Fleetwood   6.719272 17.16997</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lincoln Continental  7.123097 17.73893</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chrysler Imperial    7.520443 18.17208</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fiat 128            21.301428 32.33201</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Honda Civic         21.850400 32.43134</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Toyota Corolla      21.333528 32.55120</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Toyota Corona       21.126467 31.13913</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Dodge Challenger    10.087606 20.10560</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AMC Javelin          9.886367 20.76156</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Camaro Z28           9.365667 20.26677</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Pontiac Firebird     8.625435 18.89637</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fiat X1-9           21.365234 32.22251</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Porsche 914-2       20.851954 31.24738</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lotus Europa        21.651287 32.48514</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Ford Pantera L       8.940693 20.53603</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Ferrari Dino        16.596912 27.61475</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Maserati Bora        9.957017 20.86331</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Volvo 142E          20.487699 31.29541</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://corymccartan.github.io/" class="external-link">Cory McCartan</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

